import{o as t,i,j as e,t as n,g as s,l as r,e as a,q as o,k as h,F as d,u as l}from"./vendor.43b1651c.js";import{A as c}from"./root.62531bb6.js";const p={name:"FilterItem",props:{value:{type:String,required:!0},text:{type:String,required:!0},name:{type:String,required:!0},checked:{type:Boolean,required:!0},handleChange:{type:Function,required:!0}},computed:{id:function(){return`filter-id-${this.value}-${Date.now()*Math.random()}`}},methods:{onChange(t){const{currentTarget:i}=t;i.checked&&(console.log(i.value,i.checked),this.handleChange(i.value))}}},f={class:"filter__radio-wrapper"};p.render=function(s,r,a,o,h,d){return t(),i("div",f,[e("input",{onChange:r[1]||(r[1]=(...t)=>d.onChange&&d.onChange(...t)),id:d.id,value:a.value,checked:a.checked,type:"radio",name:a.name,class:"filter__radio"},null,40,["id","value","checked","name"]),e("label",{for:d.id,class:"filter__item"},n(a.text),9,["for"])])};const u={name:"FilterElm",components:{FilterItem:p},data:()=>({config:{widthShrink:0,widthExpand:0,posLeft:0,duration:.3},isPinned:!1,isActive:!1}),props:{filterItems:{type:Array,required:!0},setActiveFilter:{type:Function,required:!0},filterName:{type:String,default:"filter"},isStatic:{type:Boolean,default:!1}},methods:{setWidthExpand(t=!1){(0===this.config.widthExpand||t)&&(this.config.widthExpand=this.$refs.root.offsetWidth+10)},setWidthShrink(){0===this.config.widthShrink&&(this.config.widthShrink=getComputedStyle(this.$refs.pinContainer).getPropertyValue("--width-shrink"))},setPosLeft(){this.config.posLeft=-1*this.$refs.pinContainer.getBoundingClientRect().left},expand(t=!1){t?s.set(this.$refs.pinContainer,{width:this.config.widthExpand}):(s.set(this.$refs.pinContainer,{clearProps:"width"}),setTimeout((()=>{this.setWidthExpand(),s.timeline().set(this.$refs.pinContainer,{width:this.config.widthExpand}).to(this.$refs.pinContainer,{background:"#131313",duration:this.config.duration})}),100))},shrink(){s.to(this.$refs.pinContainer,{background:"transparent",duration:this.config.duration}),this.isPinned&&setTimeout((()=>{this.setWidthShrink(),s.set(this.$refs.pinContainer,{width:this.config.widthShrink})}),500)},pin(t=!1){t?s.set(this.$refs.pinContainer,{x:this.config.posLeft}):s.to(this.$refs.pinContainer,{x:this.config.posLeft,duration:this.config.duration})},unpin(t=!0){s.to(this.$refs.pinContainer,{x:0,background:"transparent",duration:this.config.duration,onStart:()=>{t&&s.set(this.$refs.pinContainer,{clearProps:"width"})}})},handleClick(){this.isActive=!this.isActive,this.isActive?this.expand():this.shrink()},throttleClick:r.exports.throttle((function(){this.handleClick()}),600),handleClickOutside(t){!t.target.closest("div.filter")&&(this.isActive=!1,this.shrink())},scrollPin(){const t=this.$refs.pinContainer;null!==t&&a.create({trigger:t,start:"top 90",end:99999,pin:!0,pinSpacing:!1,onToggle:({isActive:t})=>{if(t)this.isPinned=!0,this.pin(),this.shrink();else{let t=this.isActive;this.$refs.btnToggle.blur(),this.isPinned=!1,this.isActive=!1,this.unpin(!t)}},onRefresh:({isActive:t})=>{this.setPosLeft(),t&&this.pin(!0),this.isActive&&(this.setWidthExpand(!0),this.expand(!0)),t&&!this.isActive&&this.shrink()}})}},mounted(){!this.isStatic&&c.isDesktop&&(c.scrollbar&&this.scrollPin(),document.addEventListener("pointerup",this.handleClickOutside))}},g={key:1,class:"filter__icon"},k=e("svg",{viewBox:"0 0 14 12",width:"14",height:"12"},[e("path",{d:"M.938.5L7 11 13.062.5H.938z"})],-1),v=e("span",{class:"icon-text"},"filter",-1),m={class:"filter__group"},C=e("legend",{class:"visually-hidden"},"Фильтр статей",-1);u.render=function(n,s,r,a,c,p){const f=o("filter-item");return t(),i("div",{ref:"pinContainer",class:[{"is-active":c.isPinned&&c.isActive},"pin-filter-container"]},[e("div",{ref:"root",class:[{"is-pinned":c.isPinned,"is-active":c.isPinned&&c.isActive},"filter"]},[r.isStatic?h("",!0):(t(),i("button",{key:0,ref:"btnToggle",onClick:s[1]||(s[1]=(...t)=>p.throttleClick&&p.throttleClick(...t)),class:"filter__collapse",type:"button"}," Переключить видимость фильтра ",512)),r.isStatic?h("",!0):(t(),i("div",g,[k,v])),e("fieldset",m,[C,(t(!0),i(d,null,l(r.filterItems,(e=>(t(),i(f,{key:e.type,value:e.value,text:e.name,checked:e.checked,handleChange:r.setActiveFilter,name:r.filterName},null,8,["value","text","checked","handleChange","name"])))),128))])],2)],2)};export{u as _};
