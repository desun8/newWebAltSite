import{o as i,e as t,f as e,i as n,g as s,t as r,b as a,l as o,h,F as d,m as c}from"./vendor.14e0bc55.js";import{A as l}from"./root.77d8b0d3.js";const p={name:"FilterItem",props:{value:{type:String,required:!0},text:{type:String,required:!0},name:{type:String,required:!0},checked:{type:Boolean,required:!0},handleChange:{type:Function,required:!0}},computed:{id:function(){return`filter-id-${this.value}-${Date.now()*Math.random()}`}},methods:{onChange(i){const{currentTarget:t}=i;t.checked&&(console.log(t.value,t.checked),this.handleChange(t.value))}}},f={class:"filter__radio-wrapper"};p.render=function(s,r,a,o,h,d){return i(),t("div",f,[e("input",{onChange:r[1]||(r[1]=(...i)=>d.onChange&&d.onChange(...i)),id:d.id,value:a.value,checked:a.checked,type:"radio",name:a.name,class:"filter__radio"},null,40,["id","value","checked","name"]),e("label",{for:d.id,class:"filter__item"},n(a.text),9,["for"])])};const u={name:"FilterElm",components:{FilterItem:p},data:()=>({config:{widthShrink:0,widthExpand:0,posLeft:0,duration:.3},isPinned:!1,isActive:!1}),props:{filterItems:{type:Array,required:!0},setActiveFilter:{type:Function,required:!0},filterName:{type:String,default:"filter"},isStatic:{type:Boolean,default:!1}},methods:{setWidthExpand(i=!1){(0===this.config.widthExpand||i)&&(this.config.widthExpand=this.$refs.root.offsetWidth+10)},setWidthShrink(){0===this.config.widthShrink&&(this.config.widthShrink=getComputedStyle(this.$refs.pinContainer).getPropertyValue("--width-shrink"))},setPosLeft(){this.config.posLeft=-1*this.$refs.pinContainer.getBoundingClientRect().left},expand(i=!1){i?s.set(this.$refs.pinContainer,{width:this.config.widthExpand}):(s.set(this.$refs.pinContainer,{clearProps:"width"}),setTimeout((()=>{this.setWidthExpand(),s.timeline().set(this.$refs.pinContainer,{width:this.config.widthExpand}).to(this.$refs.pinContainer,{background:"#131313",duration:this.config.duration})}),100))},shrink(){s.to(this.$refs.pinContainer,{background:"transparent",duration:this.config.duration}),this.isPinned&&setTimeout((()=>{this.setWidthShrink(),s.set(this.$refs.pinContainer,{width:this.config.widthShrink})}),500)},pin(i=!1){i?s.set(this.$refs.pinContainer,{x:this.config.posLeft}):s.to(this.$refs.pinContainer,{x:this.config.posLeft,duration:this.config.duration})},unpin(i=!0){s.to(this.$refs.pinContainer,{x:0,background:"transparent",duration:this.config.duration,onStart:()=>{i&&s.set(this.$refs.pinContainer,{clearProps:"width"})}})},handleClick(){this.isActive=!this.isActive,this.isActive?this.expand():this.shrink()},throttleClick:r((function(){this.handleClick()}),600),handleClickOutside(i){!i.target.closest("div.filter")&&(this.isActive=!1,this.shrink())},scrollPin(){const i=this.$refs.pinContainer;null!==i&&a.create({trigger:i,start:"top 90",end:99999,pin:!0,pinSpacing:!1,onToggle:({isActive:i})=>{if(i)this.isPinned=!0,this.pin(),this.shrink();else{let i=this.isActive;this.$refs.btnToggle.blur(),this.isPinned=!1,this.isActive=!1,this.unpin(!i)}},onRefresh:({isActive:i})=>{this.setPosLeft(),i&&this.pin(!0),this.isActive&&(this.setWidthExpand(!0),this.expand(!0)),i&&!this.isActive&&this.shrink()}})}},mounted(){!this.isStatic&&l.isDesktop&&(l.scrollbar&&this.scrollPin(),document.addEventListener("pointerup",this.handleClickOutside))}},g={key:1,class:"filter__icon"},v=e("svg",{viewBox:"0 0 14 12",width:"14",height:"12"},[e("path",{d:"M.938.5L7 11 13.062.5H.938z"})],-1),k=e("span",{class:"icon-text"},"filter",-1),m={class:"filter__group"},C=e("legend",{class:"visually-hidden"},"Фильтр статей",-1);u.render=function(n,s,r,a,l,p){const f=o("filter-item");return i(),t("div",{ref:"pinContainer",class:[{"is-active":l.isPinned&&l.isActive},"pin-filter-container"]},[e("div",{ref:"root",class:[{"is-pinned":l.isPinned,"is-active":l.isPinned&&l.isActive},"filter"]},[r.isStatic?h("",!0):(i(),t("button",{key:0,ref:"btnToggle",onClick:s[1]||(s[1]=(...i)=>p.throttleClick&&p.throttleClick(...i)),class:"filter__collapse",type:"button"}," Переключить видимость фильтра ",512)),r.isStatic?h("",!0):(i(),t("div",g,[v,k])),e("fieldset",m,[C,(i(!0),t(d,null,c(r.filterItems,(e=>(i(),t(f,{key:e.type,value:e.value,text:e.name,checked:e.checked,handleChange:r.setActiveFilter,name:r.filterName},null,8,["value","text","checked","handleChange","name"])))),128))])],2)],2)};export{u as _};
