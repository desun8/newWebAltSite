const e=e=>{const s=window.RECAPTCHA_KEY;console.log("🚀 ~ file: submit.ts ~ line 8 ~ submit ~ KEY",s);const o=e.action,t=new FormData(e),r={method:"POST",body:t},n=e=>{if(console.log("🚀 ~ file: submit.ts ~ line 11 ~ handleErrors ~ response",e),!e.ok)throw Error(e.statusText);return e.json()},a=e=>{if(console.log("🚀 ~ file: submit.ts ~ line 30 ~ handleSuccess ~ response",e),"ok"!==e.status)throw Error(e.message);console.log("форма отправилась"),console.log(e)};return new Promise((function(e,c){window.grecaptcha.ready((()=>{window.grecaptcha.execute(s,{action:"form"}).then((e=>(t.append("recaptcha_response",e),fetch(o,r).then(n).then(a).catch((e=>console.error("Форма не отправилась",e)))))).then((()=>{e("success")}))}))}))};var s,o;(o=s||(s={}))[o.Success=0]="Success",o[o.Error=1]="Error";const t=e=>e.closest(".form-field"),r=e=>{e.addEventListener("keydown",(()=>{e.hasAttribute("invalid")&&(e=>{n(e,0),n(e,1)})(e)}))},n=(e,s)=>{const o=0===s?"is-success":"has-error",r=t(e);r&&(r.classList.remove(o),e.removeAttribute("invalid"))},a=(e,s,o)=>{o?((e,s)=>{const o=0===s?"is-success":"has-error",r=t(e);r&&(r.classList.add(o),e.setAttribute("invalid",""))})(e,s):n(e,s)},c=e=>{const{value:s}=e,o=null!==s.match(/^(?:[a-z0-9!#$%&'*+\/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+\/=?^_`{|}~-]+)*|"*")@(?:(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?|\[(?:(?:(2(5[0-5]|[0-4][0-9])|1[0-9][0-9]|[1-9]?[0-9]))\.){3}(?:(2(5[0-5]|[0-4][0-9])|1[0-9][0-9]|[1-9]?[0-9])|[a-z0-9-]*[a-z0-9]+)])$/i);return((e,s)=>{s?(a(e,1,!1),a(e,0,!0)):(a(e,0,!1),a(e,1,!0))})(e,o),console.warn("Проверка email",o),o};export{r as h,e as s,c as v};
