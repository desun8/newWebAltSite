import{S as e,N as t,P as s,I as i,J as o}from"./vendor.js";const n=window.RECAPTCHA_KEY;e.use([t,s]);class r{constructor(e,t,s=n){this.formEl=e,this.formInputElms=this.formEl.querySelectorAll("input"),this.submitBtn=this.formEl.querySelector("button[type=submit]"),this.validationRules=t,this.recaptchaKey=s,this.formEl&&this.validationRules&&this.recaptchaKey?this.init():console.error(`Не верный селектор: ${e}.`)}addValidation(){this.validation=new o(this.formEl),this.validationRules.forEach((e=>{this.validation.addField(e.field,e.rules)}))}addSubmitEvent(){this.formEl.addEventListener("submit",(e=>{e.preventDefault();this.validation.isValid&&this.handleSubmit()}))}handleSubmit(){const e=this.recaptchaKey,t=this.formEl.action,s=new FormData(this.formEl),i={method:"POST",body:s},o=e=>{if(!e.ok)throw Error(e.statusText);return e.json()},n=e=>{if("ok"!==e.status.toLowerCase())throw Error(e.message);return this.showSuccessMsg(),this.resetForm(),e};return new Promise((function(r,a){window.grecaptcha.ready((()=>{window.grecaptcha.execute(e,{action:"form"}).then((e=>(s.append("recaptcha_response",e),fetch(t,i).then(o).then(n).catch((e=>console.error("Форма не отправилась",e)))))).then((()=>{r("success")}))}))}))}resetForm(){this.formInputElms.length&&this.formInputElms.forEach((e=>{e.value="",e.classList.remove("valid","just-validate-error-field")}))}showSuccessMsg(){if(this.submitBtn){const e=this.submitBtn.querySelector(".link__text");if(e){const t=e.offsetWidth,s="Спасибо!",i=e.textContent;e.disabled=!0,e.style.transition="all 300ms",e.style.opacity="0",setTimeout((()=>{e.style.width=t+"px",e.style.textAlign="right",e.textContent=s,setTimeout((()=>{e.style.opacity="",setTimeout((()=>{e.style.opacity="0",setTimeout((()=>{e.style.width="",e.style.textAlign="",e.textContent=i,setTimeout((()=>{e.style.opacity="",e.disabled=!1}),100)}),300)}),1500)}),100)}),300)}}}init(){this.addValidation(),this.addSubmitEvent()}}var a,c;a=function(e){1==e?document.querySelector("body").classList.add("webp"):document.querySelector("body").classList.add("no-webp")},(c=new Image).onload=c.onerror=function(){a(2==c.height)},c.src="data:image/webp;base64,UklGRjoAAABXRUJQVlA4IC4AAACyAgCdASoCAAIALmk0mk0iIiIiIgBoSygABc6WWgAA/veff/0PP8bA//LwYAAA",document.addEventListener("DOMContentLoaded",(()=>{document.querySelector("body"),document.querySelector(".wrapper"),document.querySelector(".header"),document.querySelector(".header__burger"),document.querySelector(".menu"),document.querySelector(".menu__link");const t=document.querySelector(".clients__inner");document.addEventListener("click",(function(e){const t=e.target;t.classList.contains("getting__item","getting__btn")&&t.classList.add("active");if(!t.classList.contains("getting__descr")&&!t.classList.contains("getting__item")){const e=document.querySelectorAll(".getting__item");for(let t=0;t<e.length;t++){const s=e[t];s.classList.contains("active")&&s.classList.remove("active")}}t.classList.contains("founder__btn-rest")&&!t.classList.contains("hide")&&(t.closest(".founder__quote").querySelector(".founder__text").classList.add("active"),t.classList.add("hide"));t.classList.contains("reviews__btn-rest")&&!t.classList.contains("hide")&&(t.closest(".reviews__info").querySelector(".reviews__text").classList.add("active"),t.classList.add("hide"),u.update());if(t.classList.contains("progress-work__btn")&&!t.classList.contains("active")){const e=document.querySelectorAll(".progress-work__btn");for(let t=0;t<e.length;t++){e[t].classList.remove("active")}t.classList.add("active");const s=document.querySelectorAll(".prosressing-work");for(let t=0;t<s.length;t++){s[t].classList.remove("active")}document.querySelector("."+t.dataset.filter).classList.add("active")}})),window.addEventListener("scroll",(function(){!function(){const e=document.querySelectorAll(".getting__item");for(let t=0;t<e.length;t++){const s=e[t];s.classList.contains("active")&&s.classList.remove("active")}}()})),t.scrollLeft=500;const s=document.querySelector(".top__image");if(s){let e=function(){window.innerWidth<=991.98&&!o()&&(s.classList.add("moved"),i.append(s)),window.innerWidth>991.98&&o()&&(s.classList.remove("moved"),t.append(s))};const t=s.closest(".top__body"),i=t.querySelector(".top__info"),o=()=>s.classList.contains("moved");e(),window.addEventListener("resize",(function(){e()}))}const o=document.querySelector(".founder__image");if(o){let e=function(){window.innerWidth<=767.98&&!i()&&(o.classList.add("moved"),s.prepend(o)),window.innerWidth>767.98&&i()&&(o.classList.remove("moved"),t.prepend(o))};const t=o.closest(".founder__container"),s=t.querySelector(".founder__info"),i=()=>o.classList.contains("moved");e(),window.addEventListener("resize",(function(){e()}))}const n=document.querySelector("#applicantsPhone"),a=document.querySelector("#pricesPhone");if(n){i(n,{mask:"+{7}(000) 000 00 00"})}if(n){i(a,{mask:"+{7}(000) 000 00 00"})}const c=document.querySelectorAll("main input");for(let e=0;e<c.length;e++){c[e].addEventListener("change",(function(){this.value.length?this.classList.add("valid"):this.classList.remove("valid")}))}const l=document.querySelector(".applicants__form");l&&new r(l,[{field:"#applicantsName",rules:[{rule:"minLength",value:3,errorMessage:"*это поле необходимо заполнить"}]},{field:"#applicantsPhone",rules:[{rule:"minLength",value:17,errorMessage:"*это поле необходимо заполнить"}]}]);const d=document.querySelector(".prices__form");d&&new r(d,[{field:"#pricesName",rules:[{rule:"minLength",value:3,errorMessage:"*это поле необходимо заполнить"}]},{field:"#pricesPhone",rules:[{rule:"minLength",value:17,errorMessage:"*это поле необходимо заполнить"}]}]);const u=new e(".reviews__body",{watchOverflow:!0,slidesPerView:1,grabCursor:!0,autoHeight:!0,navigation:{nextEl:".reviews__next",prevEl:".reviews__prev"},pagination:{el:".reviews__pagination",type:"bullets"},breakpoints:{991.98:{pagination:{autoHeight:!1,el:".reviews__pagination",type:"fraction"}}},on:{init(){console.log("HELLO MOTHEFICKA")}}});document.onmousemove=function(e){let t=e.y,s=e.x;const i=document.querySelector(".our-help__list"),o=i.getBoundingClientRect().top,n=i.getBoundingClientRect().left,r=document.querySelector(".our-help__arrow svg");let a=t-o,c=s-n,l=i.offsetHeight,d=i.offsetWidth;a>=0&&a<=l-10&&c>=0&&c<=d?(r.style.transform="translateY("+a+"px)",r.style.opacity=1):r.style.opacity=0}}));
